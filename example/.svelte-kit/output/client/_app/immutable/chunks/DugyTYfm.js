import{O as d,J as h,x as y}from"./43DoFiGK.js";import{a as m,b as p,q as k,c as w,d as _,e as g,H as T,v as q}from"./C-T-am70.js";function l(s){for(const e of s)"release"in e&&e.release()}function v(s,e=[]){const c=Object.entries(m(s,p.decoders));for(const[i,a]of c){const r=e.find(t=>t._key===i);r&&"release"in r&&r.release(),k.get(i)?.resource.set(a)}}function o(s){let e=h(0);const c=i=>{let a=[];d(e);const r=(async()=>{try{await Promise.resolve();const n=await fetch(`${w}/${_}/remote/${s}`,{method:"POST",body:JSON.stringify({payload:g(i,p.hooks.transport),refreshes:a.map(u=>u._key)}),headers:{"Content-Type":"application/json","x-sveltekit-pathname":location.pathname,"x-sveltekit-search":location.search}});if(!n.ok)throw l(a),new Error("Failed to execute remote function");const t=await n.json();if(t.type==="redirect")throw l(a),new Error("Redirects are not allowed in commands. Return a result instead and use goto on the client");if(t.type==="error")throw l(a),new T(t.status??500,t.error);return t.refreshes&&v(t.refreshes,a),m(t.result,p.decoders)}finally{d(e,-1)}})();return r.updates=(...n)=>(a=n,delete r.updates,r),r};return Object.defineProperty(c,"pending",{get:()=>y(e)}),c}const f=`sveltekit:${q}`;let b;(async()=>{if(typeof caches<"u")try{b=await caches.open(f);const s=await caches.keys();for(const e of s)e.startsWith("sveltekit:")&&e!==f&&await caches.delete(e)}catch(s){console.warn("Failed to initialize SvelteKit cache:",s)}})();const E=o("q5s0im/cancelTask"),O=o("q5s0im/clearCompleted"),j=o("q5s0im/getTasks"),$=o("q5s0im/pauseTask");o("q5s0im/resetLevel");const H=o("q5s0im/resumeTask");o("q5s0im/setMessage");const P=o("q5s0im/startTask");export{O as a,E as c,j as g,$ as p,H as r,P as s};
